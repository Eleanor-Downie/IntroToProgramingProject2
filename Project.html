<!DOCTYPE html>
<!-- Eleanor J. Downie
     December 3, 2014
     Introduction to Programming
     Project 5- Game v0.8 -->
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
      <meta name="author"             content="Eleanor J. Downie" />
   <title>
      Space: The Final Frontier
   </title>
   <style> 
      .title {font: sans-serif; font-size: xx-large; font-weight: bold;}
   </style>   
   <script type="text/javascript" src="GameLocations.js"></script>
   <script type="text/javascript">
	   //Location Array
       var planetLoc = new Array()
                       planetLoc[0]= spaceStation,
                       planetLoc[1]= icePlanet,
                       planetLoc[2]= waterPlanet,
                       planetLoc[3]= firePlanet,
                       planetLoc[4]= junglePlanet,
                       planetLoc[5]= cloudPlanet,
                       planetLoc[6]= diamondPlanet,
                       planetLoc[7]= desertPlanet,
                       planetLoc[8]= asteroidBelt,
                       planetLoc[9]= metalPlanet,
                       planetLoc[10]= gravityPlanet,
                       planetLoc[11]= earthPlanet;

       //Items Array
       var items = new Array()
                   items[9]=gravityDevice;
                   items[5]=shield;
                   items[7]=phaser;
                   items[11]=betterShip;

       //For Inventory to Work
       var inventory = new Array();

       //Game Global Variables
	   var currLoc = 0;  
	   var score = 5; 	   

	   
       //Variables for Scorekeeping
	   var visited0_spaceStation = false;
	   var visited1_icePlanet = false;
	   var visited2_waterPlanet = false;
	   var visited3_firePlanet = false;
	   var visited4_junglePlanet = false;
	   var visited5_cloudPlanet = false;
	   var visited6_diamondPlanet = false;
	   var visited7_desertPlanet = false;
	   var visited8_asteroidBelt = false;
	   var visited9_metalPlanet = false;
	   var visited10_gravityPlanet = false;
	   var visited11_earthPlanet = false;
       
	   //Initialization
       function init(){
       dispmsg(planetLoc[currLoc].description);
       }

       function determineLocation(){
          if(planetLoc[currLoc].hasItem===true && items[currLoc].isTaken===false){
             dispmsg(planetLoc[currLoc].description+items[currLoc].description);
          } else {
              dispmsg(planetLoc[currLoc].description);
            }
       }
	   //Directional Functions
	   function goNorth(){ 
	      switch(currLoc){
		     case 3:
			    currLoc=0;
			    break;
		     case 0:
			    currLoc=1;
			    break;
		     case 5:
			    currLoc=4;
			    break;
		     case 1:
			    currLoc=6;
			    break;
		     case 8:
			    currLoc=9;
			    break;
		     case 11:
			    currLoc=10;
			    break;
		     default:
			    navigationError();
	      }
         determineLocation();
         buttonDisable();
         completeScore();
	   }

				  
	   function goSouth(){                
	      switch(currLoc){
		     case 1:
			    currLoc=0;
			    break;
		     case 0:
			    currLoc=3;
			    break;
		     case 4:
			    currLoc=5;
			    break;
		     case 6:
			    currLoc=1;
			    break;
		     case 9:
			    currLoc=8;
			    break;
		     case 10:
			    currLoc=11;
			    break;
		     default:
			    navigationError();
	      }
         determineLocation();
         buttonDisable();
         completeScore();
	   }


	   function goEast(){                
	      switch(currLoc){
		     case 2:
			    currLoc=0;
			    break;
		     case 0:
			    currLoc=4;
			    break;
		     case 3:
			    currLoc=5;
			    break;
		     case 7:
			    currLoc=6;
			    break;
		     case 6:
			    currLoc=8;
			    break;
		     case 8:
			    currLoc=10;
			    break;
		     default:
			    navigationError();
	      }
         determineLocation();
         buttonDisable();
         completeScore();
	   }  


	   function goWest(){                
	      switch(currLoc){
		     case 4:
			    currLoc=0;
			    break;
		     case 0:
			    currLoc=2;
			    break;
		     case 5:
			    currLoc=3;
			    break;
		     case 10:
			    currLoc=8;
			    break;
		     case 8:
			    currLoc=6;
			    break;
		     case 6:
			    currLoc=7;
			    break;
		     default:
			    navigationError();
	      }
         determineLocation();
         buttonDisable();
         completeScore();
	   }  
	  

	   //Commandbox Directional Functions
	   function btnGo_click(){
	      var userDirection = document.getElementById("txtCommand").value;
	      userDirection = userDirection.trim();
	      userDirection = userDirection.toUpperCase();
	      switch(userDirection){
		     case 'N': goNorth();
			      break;
		     case 'S': goSouth();
			      break;
	   	     case 'E': goEast();
			      break;
		     case 'W': goWest();
			      break;  
	   	     case 'HELP': dispmsg("You may use the directional buttons below to move, or type N, S, E, or W into the command bar.");
			      break;
		     case 'TAKE': takeItem();
			      break;
		     case 'INVENTORY': dispmsg("Inventory:\n"+inventory);
			      break;
		     default: dispmsg("You cannot use that command. You may only use: N, S, E, or W.");
	      }   
	   }


	   //Story Functions
	   function navigationError(){
	      dispmsg("This part of space is not yet explorable.");
	   }


	   function completeScore(){
	      var targetScoreArea = document.getElementById("scoreArea");
	      targetScoreArea.value = score;
	      if ((! visited0_spaceStation) && (currLoc === 0)){
		      score = score + 5;
		      visited_0 = true;
	      } else if ((! visited1_icePlanet) && (currLoc === 1)) {
		      score = score + 5;
		      visited_1 = true;
	      } else if ((! visited2_waterPlanet) && (currLoc === 2)) {
		      score = score + 5;
		      visited_2 = true;
	      } else if ((! visited3_firePlanet) && (currLoc === 3)) {
		      score = score + 5;
		      visited_3 = true;
	      } else if ((! visited4_junglePlanet) && (currLoc === 4)) {
		      score = score + 5;
		      visited_4 = true;
	      } else if ((! visited5_cloudPlanet) && (currLoc === 5)) {
		      score = score + 5;
		      visited_5 = true;
	      } else if ((! visited6_diamondPlanet) && (currLoc === 6)) {
		      score = score + 5;
		      visited_6 = true;
	      } else if ((! visited7_desertPlanet) && (currLoc === 7)) {
		      score = score + 5;
		      visited_7 = true;
	      } else if ((! visited8_asteroidBelt) && (currLoc === 8)) {
		      score = score + 5;
		      visited_8 = true;
	      } else if ((! visited9_metalPlanet) && (currLoc === 9)) {
		      score = score + 5;
		      visited_9 = true;
	      } else if ((! visited10_gravityPlanet) && (currLoc === 10)) {
		      score = score + 5;
		      visited_10 = true;
	      } else if ((! visited11_earthPlanet) && (currLoc === 11)) {
		      score = score + 5;
		      visited_11 = true;
	      }
	   }


       function takeItem(){
          if(items[currLoc].isTaken===false && planetLoc[currLoc].hasItem===true){
             inventory.push(items[currLoc].name);
             items[currLoc].isTaken=true;
             dispmsg("You took the " + items[currLoc].name);
          } else {
               dispmsg("There is nothing to take.");
            }
       }


	   //Utility functions
	   function dispmsg(msg){
	      var target = document.getElementById("taMain");
	      target.value = msg +"\n\n" + target.value;
	   }  

	   function txtCommand_keyPress(keyboardEvent){
	      if (keyboardEvent.which === 13) {
		     btnGo_click();
	      }
	   }

	   function buttonDisable(){
	      switch(currLoc){
		     case 0:
			    document.getElementById("btn_North").disabled=false;
			    document.getElementById("btn_South").disabled=false;
			    document.getElementById("btn_East").disabled=false;
			    document.getElementById("btn_West").disabled=false; 
			    break;
		     case 1:
			    document.getElementById("btn_North").disabled=false;
			    document.getElementById("btn_South").disabled=false;
			    document.getElementById("btn_East").disabled=true;
			    document.getElementById("btn_West").disabled=true; 
			    break;
		     case 2:
			    document.getElementById("btn_North").disabled=true;
			    document.getElementById("btn_South").disabled=true;
			    document.getElementById("btn_East").disabled=false;
			    document.getElementById("btn_West").disabled=true; 
			    break;
		     case 3:
			    document.getElementById("btn_North").disabled=false;
			    document.getElementById("btn_South").disabled=true;
			    document.getElementById("btn_East").disabled=false;
			    document.getElementById("btn_West").disabled=true; 
		 	    break;
		     case 4:
			    document.getElementById("btn_North").disabled=true;
			    document.getElementById("btn_South").disabled=false;
			    document.getElementById("btn_East").disabled=true;
			    document.getElementById("btn_West").disabled=false; 
			    break;
		     case 5:
			    document.getElementById("btn_North").disabled=false;
			    document.getElementById("btn_South").disabled=true;
			    document.getElementById("btn_East").disabled=true;
			    document.getElementById("btn_West").disabled=false; 
			    break;
		     case 6:
			    document.getElementById("btn_North").disabled=true;
			    document.getElementById("btn_South").disabled=false;
			    document.getElementById("btn_East").disabled=false;
			    document.getElementById("btn_West").disabled=false; 
			    break;
		     case 7:
			    document.getElementById("btn_North").disabled=true;
			    document.getElementById("btn_South").disabled=true;
			    document.getElementById("btn_East").disabled=false;
			    document.getElementById("btn_West").disabled=true; 
			    break;
		     case 8:
			    document.getElementById("btn_North").disabled=false;
			    document.getElementById("btn_South").disabled=true;
			    document.getElementById("btn_East").disabled=false;
			    document.getElementById("btn_West").disabled=false; 
			    break;
		     case 9:
			    document.getElementById("btn_North").disabled=true;
			    document.getElementById("btn_South").disabled=false;
			    document.getElementById("btn_East").disabled=true;
			    document.getElementById("btn_West").disabled=true; 
			    break;
		     case 10:
			    document.getElementById("btn_North").disabled=true;
			    document.getElementById("btn_South").disabled=false;
			    document.getElementById("btn_East").disabled=true;
			    document.getElementById("btn_West").disabled=false; 
			    break;
		     case 11:
			    document.getElementById("btn_North").disabled=false;
			    document.getElementById("btn_South").disabled=true;
			    document.getElementById("btn_East").disabled=true;
			    document.getElementById("btn_West").disabled=true; 
			    break;
	      }
  	   }
</script>
   </head>
   <body onload="init();">
       <table>
          <tr>
             <td>
                <h1 class="title">
                   Space: The Final Frontier
                </h1>
                <br>
                <p>
                   You are in a space station ready to explore the cosmos, where would you like to go?
                </p>
                <br>
                <textarea rows="20" cols="60" id="taMain"></textarea>
       
                <br>
                <br>
                <input type="text"
                       id = "txtCommand"
                       name="txtCommand"
                       placeholder="Enter Naviagtion Here!"
                       onkeypress="txtCommand_keyPress(event);">
       
                <input type="button"
                       value="Go"
                       onclick="btnGo_click();" />

                <br>
                <br>
                <input type="button" 
                       value="North"
                       id="btn_North"
                       onclick="goNorth()" />
  
                <input type="button"
                       value="South"
                       id="btn_South"
                       onclick="goSouth()" />
       
                <input type="button"
                       value="East"
                       id="btn_East"
                       onclick="goEast()" />

                <input type="button"
                       value="West"
                       id="btn_West"
                       onclick="goWest()" />

                <br>
                <br>
                Score:
                <textarea rows="1" cols="5" id="scoreArea">0</textarea>
                <br>
                <br>
                <a href="mailto:eleanor.downie1@marist.edu">Email Me Here!</a>
             </td>
             <td>
                <img src="GameMap.jpg" alt="Map" height="650" width="650">
             </td>
          </tr>
       </table>       
   </body>
</html>